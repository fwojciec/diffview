{"id":"diffview-ant","title":"Main wiring","description":"cmd/diffview/main.go - stdin detection, parser + viewer wiring, error handling, exit codes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T18:49:12.187088-08:00","updated_at":"2025-12-23T22:25:18.355404-08:00","closed_at":"2025-12-23T22:25:18.355408-08:00","dependencies":[{"issue_id":"diffview-ant","depends_on_id":"diffview-w0d","type":"blocks","created_at":"2025-12-23T18:49:53.79042-08:00","created_by":"daemon"},{"issue_id":"diffview-ant","depends_on_id":"diffview-m9i","type":"blocks","created_at":"2025-12-23T18:49:53.868288-08:00","created_by":"daemon"},{"issue_id":"diffview-ant","depends_on_id":"diffview-lzy","type":"parent-child","created_at":"2025-12-23T18:49:42.436068-08:00","created_by":"daemon"}]}
{"id":"diffview-drc","title":"Styling system","description":"Theme, Styles, ColorPair types. DefaultTheme with diff coloring (added/deleted/context). Light/dark support structure.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T18:49:11.761233-08:00","updated_at":"2025-12-23T21:16:58.733579-08:00","closed_at":"2025-12-23T21:16:58.733583-08:00","dependencies":[{"issue_id":"diffview-drc","depends_on_id":"diffview-lzy","type":"parent-child","created_at":"2025-12-23T18:49:42.201597-08:00","created_by":"daemon"},{"issue_id":"diffview-drc","depends_on_id":"diffview-z57","type":"blocks","created_at":"2025-12-23T18:49:53.553227-08:00","created_by":"daemon"}]}
{"id":"diffview-m9i","title":"Hunk navigation","description":"Track hunkPositions during render. Implement n/N (next/prev hunk), ]/[ (next/prev file) jumping.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T18:49:12.044884-08:00","updated_at":"2025-12-23T21:59:28.76102-08:00","closed_at":"2025-12-23T21:59:28.761024-08:00","dependencies":[{"issue_id":"diffview-m9i","depends_on_id":"diffview-z57","type":"blocks","created_at":"2025-12-23T18:49:53.712404-08:00","created_by":"daemon"},{"issue_id":"diffview-m9i","depends_on_id":"diffview-lzy","type":"parent-child","created_at":"2025-12-23T18:49:42.358068-08:00","created_by":"daemon"}]}
{"id":"diffview-npu","title":"Domain types","description":"Root package with Diff, Hunk, Line types and Parser, Viewer interfaces. No external dependencies per Ben Johnson pattern.","notes":"COMPLETED: Domain types (Diff, FileDiff, Hunk, Line) and interfaces (Parser, Viewer)\nIN_PROGRESS: Self-review\nNEXT: Code review and finish\nKEY_DECISIONS: Used io/fs.FileMode for file modes, context.Context for Viewer cancellation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T18:48:57.465717-08:00","updated_at":"2025-12-23T19:33:23.952374-08:00","closed_at":"2025-12-23T19:33:23.952375-08:00","dependencies":[{"issue_id":"diffview-npu","depends_on_id":"diffview-lzy","type":"parent-child","created_at":"2025-12-23T18:49:41.957753-08:00","created_by":"daemon"}]}
{"id":"diffview-z57","title":"Viewer scaffold","description":"bubbletea/ package with basic Model, viewport integration, stdin reading, quit handling. Minimal working pager.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T18:49:11.622236-08:00","updated_at":"2025-12-23T20:33:37.027674-08:00","closed_at":"2025-12-23T20:33:37.027676-08:00","dependencies":[{"issue_id":"diffview-z57","depends_on_id":"diffview-lzy","type":"parent-child","created_at":"2025-12-23T18:49:42.12409-08:00","created_by":"daemon"},{"issue_id":"diffview-z57","depends_on_id":"diffview-npu","type":"blocks","created_at":"2025-12-23T18:49:53.469895-08:00","created_by":"daemon"}]}
{"id":"diffview-dgu","title":"Fix double line spacing in viewer","description":"## Problem\nThe viewer shows double line spacing between lines. Likely caused by `line.Content` already including trailing newline AND renderer adding another `\\n`.\n\n## Entrypoints\n- `bubbletea/viewer.go:renderDiffWithPositions()` line 172-173\n- Check what go-gitdiff returns in `line.Line`\n\n## Validation\n- [ ] Lines display with normal single spacing\n- [ ] make validate passes","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-23T22:31:56.438468-08:00","updated_at":"2025-12-23T22:31:56.438468-08:00","dependencies":[{"issue_id":"diffview-dgu","depends_on_id":"diffview-7u3","type":"blocks","created_at":"2025-12-23T22:32:08.381891-08:00","created_by":"daemon"}]}
{"id":"diffview-e72","title":"Verify context cancellation in viewer","description":"## Problem\nContext is passed to `tea.WithContext(ctx)` but we should verify it actually cancels the viewer when the context is cancelled.\n\n## Entrypoints\n- `bubbletea/viewer.go:View()` line 207-218\n- `bubbletea/viewer_test.go:TestViewer_ContextCancellation` - existing test\n\n## Validation\n- [ ] Verify existing test actually tests cancellation properly\n- [ ] Add integration test if needed\n- [ ] make validate passes","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T22:32:02.245551-08:00","updated_at":"2025-12-23T22:32:02.245551-08:00"}
{"id":"diffview-w0d","title":"Parser implementation","description":"gitdiff/ package using bluekeyes/go-gitdiff. Parses unified diff, flattens file-centric to hunk-centric, computes line numbers.","notes":"COMPLETED: Parser implementation with go-gitdiff\n- Created gitdiff/ package with Parser type\n- Implements diffview.Parser interface\n- Parses unified diff format, handles all file operations (add/delete/modify/rename/copy)\n- Computes line numbers for old and new files\n- Handles binary files, no-newline-at-EOF markers\n- 8 passing tests covering all major scenarios\n\nKEY_DECISIONS:\n- Package named 'gitdiff' after the dependency (Ben Johnson pattern)\n- go-gitdiff strips a/b prefixes from paths (library behavior, not added back)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T18:49:11.479258-08:00","updated_at":"2025-12-23T20:18:47.669586-08:00","closed_at":"2025-12-23T20:18:47.669589-08:00","dependencies":[{"issue_id":"diffview-w0d","depends_on_id":"diffview-npu","type":"blocks","created_at":"2025-12-23T18:49:53.383597-08:00","created_by":"daemon"},{"issue_id":"diffview-w0d","depends_on_id":"diffview-lzy","type":"parent-child","created_at":"2025-12-23T18:49:42.042751-08:00","created_by":"daemon"}]}
{"id":"diffview-0o8","title":"Context cancellation support","description":"## Problem\nThe Viewer.View method accepts a context parameter but doesn't use it. This means there's no way to cancel a running viewer externally.\n\n## Entrypoints\n- bubbletea/viewer.go:93 (View method)\n\n## Solution\nAdd tea.WithContext(ctx) to the program options:\n```go\np := tea.NewProgram(m,\n    tea.WithAltScreen(),\n    tea.WithMouseCellMotion(),\n    tea.WithContext(ctx),\n)\n```\n\n## Validation\n- [ ] Context cancellation terminates the viewer\n- [ ] Test covers cancellation behavior\n- [ ] make validate passes","notes":"COMPLETED: Context cancellation support\n- Added tea.WithContext(ctx) to program options\n- Added ViewerOption functional options pattern for testing\n- Test verifies viewer exits when context is cancelled\n\nKEY_DECISIONS:\n- Added WithProgramOptions() for injecting custom IO in tests\n- This enables testing without requiring a TTY","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T20:35:25.013463-08:00","updated_at":"2025-12-23T20:55:39.68024-08:00","closed_at":"2025-12-23T20:55:39.680244-08:00","dependencies":[{"issue_id":"diffview-0o8","depends_on_id":"diffview-z57","type":"blocks","created_at":"2025-12-23T20:35:32.158933-08:00","created_by":"daemon"}]}
{"id":"diffview-lzy","title":"Milestone 1: Diff Pager","description":"A competent git diff | diffview pager with proper domain types, parsing, and navigation. Foundation for future semantic/AI features.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-23T18:48:52.458455-08:00","updated_at":"2025-12-23T18:48:52.458455-08:00"}
{"id":"diffview-xtn","title":"Keybindings","description":"KeyMap type, DefaultKeyMap with vim-style navigation. Multi-key sequence handling (gg) via pendingKey state.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T18:49:11.903201-08:00","updated_at":"2025-12-23T21:36:02.98577-08:00","closed_at":"2025-12-23T21:36:02.985775-08:00","dependencies":[{"issue_id":"diffview-xtn","depends_on_id":"diffview-lzy","type":"parent-child","created_at":"2025-12-23T18:49:42.27919-08:00","created_by":"daemon"},{"issue_id":"diffview-xtn","depends_on_id":"diffview-z57","type":"blocks","created_at":"2025-12-23T18:49:53.633992-08:00","created_by":"daemon"}]}
{"id":"diffview-7u3","title":"Diff renderer with styling","description":"## Problem\nThe viewer doesn't render diffs properly. It just dumps raw `line.Content` with no formatting.\n\n## Missing Features\n- File headers (`--- a/file`, `+++ b/file`)\n- Hunk headers (`@@ -1,5 +1,10 @@`)\n- Line prefixes (`+`/`-`/` ` for added/deleted/context)\n- Colors from the styling system (`lipgloss/theme.go` exists but isn't used)\n\n## Entrypoints\n- `bubbletea/viewer.go:renderDiffWithPositions()` - current renderer\n- `lipgloss/theme.go` - theme/colors to apply\n- `diffview.go` - domain types (Line.Type, Styles, etc.)\n\n## Validation\n- [ ] File headers shown with yellow/background styling\n- [ ] Hunk headers shown with blue styling\n- [ ] Added lines green with + prefix\n- [ ] Deleted lines red with - prefix\n- [ ] Context lines gray with space prefix\n- [ ] make validate passes","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T22:31:49.164312-08:00","updated_at":"2025-12-23T22:31:49.164312-08:00","dependencies":[{"issue_id":"diffview-7u3","depends_on_id":"diffview-lzy","type":"blocks","created_at":"2025-12-23T22:32:08.460312-08:00","created_by":"daemon"}]}
